# include "_macros.fos"

# define MAX_SKINS_COUNT    ( 414 )
# define PID_ITEM_CLOTH     ( 905 )

void ModuleInit( string&in, Handle@ )
{
    EventRoot.SetCallback( "Start", skins_start );
}

import void ChangeCritterSpeed( Critter& cr ) from "speed"; // pm add

void skins_start( string&in, Handle@ )
{
    skins_setup_load( 0 );
}

bool[] skins_toggled;

void skins_setup_start( Critter& player, int param0, int param1, int param2 )
{
    skins_toggled.resize( 1 );
    skins_toggled[ 0 ] = false;
    player.StatBase[ ST_VAR0 ] = 1;
    ask_next_setup( player );
}

void skins_setup_continue( Critter& player, int param0, int param1, int param2 )
{
    if( player.StatBase[ ST_VAR0 ] < 1 )
        return;
    ask_next_setup( player );
}

void skins_setup_new( Critter& player, int fileIndex, int param1, int param2 )
{
    string result = "";
    for( uint i = 0; i <= MAX_SKINS_COUNT; i++ )
    {
        result += "1";
    }
    file skins_file;
    skins_file.open( "skins_cfg_" + fileIndex + ".txt", "w" );
    skins_file.setPos( 0 );
    skins_file.writeString( result );
    skins_file.close();
}

void skins_setup_save( Critter& player, int fileIndex, int param1, int param2 )
{
    string result = "";
    for( uint i = 0; i < skins_toggled.length(); i++ )
    {
        result += ( ( skins_toggled[ i ] ) ? "1" : "0" );
    }
    if( result.length() < 1 )
        return;

    file skins_file;
    skins_file.open( "skins_cfg_" + fileIndex + ".txt", "w" );

    skins_file.setPos( 0 );

    skins_file.writeString( result );

    skins_file.close();
}

void skins_setup_load( Critter& player, int fileIndex, int param1, int param2 )
{
    skins_setup_load( uint( fileIndex ) );
}

void skins_setup_load( uint fileIndex )  // import
{
    file skins_file;
    skins_file.open( "skins_cfg_" + fileIndex + ".txt", "r" );

    skins_file.setPos( 0 );

    string result = "";

    skins_file.readLine( result );

    if( result.length() < 1 )
        return;

    skins_toggled.resize( 0 );

    for( uint i = 0; i < result.length(); i++ )
    {
        bool bb = ( ( result[ i ] == '1' ) ? true : false );
        // push_back(skins_toggled,bb);
        skins_toggled.insertLast( bb );
    }

    skins_file.close();
}

void skins_setup_list( Critter& player, int fileIndex, int param1, int param2 )
{
    for( uint i = 0; i < skins_toggled.length(); i++ )
    {
        if( !skins_toggled[ i ] )
            continue;
        player.Say( SAY_NETMSG, "Skin #" + i + " enabled." );
    }
}

void skins_setup_getn( Critter& player, int ni, int param1, int param2 )
{
    uint n = ni;
    uint oldlen = skins_toggled.length();
    if( n >= oldlen )
    {
        if( n >= MAX_SKINS_COUNT )
        {
            player.Say( SAY_NETMSG, "Номер скина больше максимально возможного." );
            return;
        }

        skins_toggled.resize( n + 1 );
        for( uint i = oldlen; i < n + 1; i++ )
        {
            skins_toggled[ i ] = false;
        }
    }

    player.Say( SAY_NETMSG, "Skin #" + n + ( ( skins_toggled[ n ] ) ? " enabled." : " disabled." ) );
}

void skins_setup_setn( Critter& player, int ni, int val, int param2 )
{
    uint n = ni;
    uint oldlen = skins_toggled.length();
    if( n >= oldlen )
    {
        if( n >= MAX_SKINS_COUNT )
        {
            player.Say( SAY_NETMSG, "Номер скина больше максимально возможного." );
            return;
        }

        skins_toggled.resize( n + 1 );
        for( uint i = oldlen; i < n + 1; i++ )
        {
            skins_toggled[ i ] = false;
        }
    }

    skins_toggled[ n ] = ( ( val == 0 ) ? false : true );

    player.Say( SAY_NETMSG, "Skin #" + n + ( ( skins_toggled[ n ] ) ? " enabled." : " disabled." ) );
}

void ask_next_setup( Critter@ player )
{
    if( !valid( player ) || !player.IsLife() || player.Stat[ ST_VAR0 ] < 1 || player.Stat[ ST_VAR0 ] >= MAX_SKINS_COUNT )
        return;
    player.ChangeCrType( player.Stat[ ST_VAR0 ] );
	ChangeCritterSpeed( player );
    // player.ShowScreen(SCREEN_CLOSE,0,"");
    player.ShowScreen( SCREEN_DIALOGBOX, 2, "answer_next_setup" );
    player.Say( SAY_DIALOGBOX_TEXT, "Позволить skin #" + player.Stat[ ST_VAR0 ] + "?" );
    player.Say( SAY_DIALOGBOX_BUTTON( 0 ), "Включить" );
    player.Say( SAY_DIALOGBOX_BUTTON( 1 ), "Отключить" );

}

void answer_next_setup( Critter& player, uint answerI, string& answerS )
{
    bool bb = ( ( answerI == 0 ) ? true : false );
    // push_back(skins_toggled,bb);
    skins_toggled.insertLast( bb );

    player.StatBase[ ST_VAR0 ] += 1;
    ask_next_setup( player );
}

uint skins_viewer_find_next( uint n )
{
    uint m = n;
    for( uint i = n + 1; i <= skins_toggled.length(); i++ )
    {
        if( i == skins_toggled.length() )
            return n;
        if( skins_toggled[ i ] )
        {
            m = i;
            break;
        }
    }
    return m;
}

uint skins_viewer_find_prev( uint n )
{
    uint m = n;
    for( uint i = n - 1; i >= 0; i-- )
    {
        if( i == 0 )
            return n;
        if( skins_toggled[ i ] )
        {
            m = i;
            break;
        }
    }
    return m;
}

void _CrIdleClearSkin( Critter& cr )
{
    Item@ armor = cr.GetItem( 0, SLOT_ARMOR );

    if( valid( armor ) )
        _CritMoveItem( cr, armor, SLOT_INV );

    uint type = cr.Stat[ ST_BASE_CRTYPE ];
    if( type == 0 )
        type = ( cr.Stat[ ST_GENDER ] == GENDER_MALE ? CRTYPE_DEFAULT_M : CRTYPE_DEFAULT_F );
    cr.ChangeCrType( type );
	ChangeCritterSpeed( cr );

    cr.SetEvent( CRITTER_EVENT_IDLE, "" );
}

void ask_next_viewer( Critter@ player )
{
    if( !valid( player ) || !player.IsLife() )
        return;

    uint n = player.Stat[ ST_VAR0 ];

    if( n < 1 || n >= MAX_SKINS_COUNT || n >= skins_toggled.length() )
        return;

    if( !skins_toggled[ n ] )
        return;

    player.ChangeCrType( n );
	ChangeCritterSpeed( player );

    //player.SetEvent( CRITTER_EVENT_IDLE, "_CrIdleClearSkin" );

    // player.ShowScreen(SCREEN_CLOSE,0,"");
    player.ShowScreen( SCREEN_DIALOGBOX, 4, "answer_next_viewer" );
    player.Say( SAY_DIALOGBOX_TEXT, "Skin #" + n );
    player.Say( SAY_DIALOGBOX_BUTTON( 0 ), "Следующий" );
    player.Say( SAY_DIALOGBOX_BUTTON( 1 ), "Предыдущий" );
    player.Say( SAY_DIALOGBOX_BUTTON( 2 ), "Выбрать" );
    player.Say( SAY_DIALOGBOX_BUTTON( 3 ), "Пижама" );
}

void answer_next_viewer( Critter& player, uint answerI, string& answerS )
{
    if( answerI == 0 )
    {
        player.StatBase[ ST_VAR0 ] = skins_viewer_find_next( player.Stat[ ST_VAR0 ] );
        ask_next_viewer( player );
    }
    else if( answerI == 1 )
    {
        player.StatBase[ ST_VAR0 ] = skins_viewer_find_prev( player.Stat[ ST_VAR0 ] );
        ask_next_viewer( player );
    }
    else if( answerI == 2 )
    {
        uint result = player.Stat[ ST_VAR0 ];

        if( !skins_toggled[ result ] )
            return;

        if( !canUseCloth( player ) )
            return;

        player.ChangeCrType( result );

        player.StatBase[ ST_BASE_CRTYPE ] = result;

        //player.DeleteItem( PID_ITEM_CLOTH, 1 );

        ChangeCritterSpeed( player );
    }
    else if( answerI == 3 )
    {
        if( !canUseCloth( player ) )
            return;

        player.ChangeCrType( player.Stat[ ST_GENDER ] == GENDER_MALE ? CRTYPE_DEFAULT_M : CRTYPE_DEFAULT_F );
        //player.StatBase[ ST_BASE_CRTYPE ] = 0;
        ChangeCritterSpeed( player );
    }
}

bool canUseCloth( Critter& player )
{
    uint defbody = player.Stat[ ST_GENDER ] == GENDER_MALE ? CRTYPE_DEFAULT_M : CRTYPE_DEFAULT_F;
    if( !player.IsLife() )
        return false;

    if( player.CountItem( PID_ITEM_CLOTH ) < 1 )
        return false;

    uint8 mode = 0;
    if( player.GetSlotProto( SLOT_ARMOR, mode ).ProtoId != 1100 )
    {
        player.Say( SAY_NETMSG, "Ваша броня мешает вам сменить обличие." );
        return false;
    }

    uint cur_skin = player.Stat[ ST_BASE_CRTYPE ];

    if( cur_skin != defbody && ( cur_skin >= skins_toggled.length() ||  !skins_toggled[ cur_skin ] ) )
    {
        player.Say( SAY_NETMSG, "Вы не можете сменить обличие." );
        return false;
    }

    return true;
}

bool _cloth_use( Item& item, Critter& player, Critter@ onCritter, Item@ onItem, Scenery@ onScenery )
{

    if( valid( onCritter ) || valid( onItem ) || valid( onScenery ) )
        return true;

    if( !canUseCloth( player ) )
        return true;

    player.StatBase[ ST_VAR0 ] = skins_viewer_find_next( 0 );
    ask_next_viewer( player );


/*	player.ShowScreen(SCREEN_CLOSE,0,"");
        player.ShowScreen(SCREEN_DIALOGBOX,1,"answer_cloth_main");
        player.Say(SAY_DIALOGBOX_TEXT,"Что сделать?");
        player.Say(SAY_DIALOGBOX_BUTTON(0),"Сменить облик");
        player.Say(SAY_DIALOGBOX_BUTTON(1),"Примерить");
 */
/*
        player.ShowScreen(SCREEN_CLOSE,0,"");
        player.ShowScreen(SCREEN_SAY,1,"answer_cloth_get");
        player.Say(SAY_SAY_TITLE,"Какой облик получить?");
        player.Say(SAY_SAY_TEXT,"0");
 */
    return true;

}
/*
   void answer_cloth_main(Critter& player, uint answerI, string& answerS)
   {
        if(answerI==0){
                //player.ShowScreen(SCREEN_CLOSE,0,"");
                player.ShowScreen(SCREEN_SAY,1,"answer_cloth_get");
                player.Say(SAY_SAY_TITLE,"Какой облик получить?");
                player.Say(SAY_SAY_TEXT,"0");
        }

   }
 */
void answer_cloth_get( Critter& player, uint answerI, string& answerS )
{
    uint8 mode = 0;
    if( player.GetSlotProto( SLOT_ARMOR, mode ).ProtoId != 1100 )
    {
        player.Say( SAY_NETMSG, "Ваша броня мешает вам сменить обличие." );
        return;
    }

    int result = 0;

    if( !StrToInt( answerS, result ) )
        return;

    if( result == 0 )
    {
        player.ChangeCrType( player.Stat[ ST_GENDER ] == GENDER_MALE ? CRTYPE_DEFAULT_M : CRTYPE_DEFAULT_F );
		ChangeCritterSpeed( player );
        player.StatBase[ ST_BASE_CRTYPE ] = player.Stat[ ST_GENDER ] == GENDER_MALE ? CRTYPE_DEFAULT_M : CRTYPE_DEFAULT_F;
        return;
    }

    if( result < 1 || result >= MAX_SKINS_COUNT || uint( result ) >= skins_toggled.length() )
        return;

    if( !skins_toggled[ result ] )
        return;

    if( player.CountItem( PID_ITEM_CLOTH ) < 1 )
        return;

    player.ChangeCrType( result );
	ChangeCritterSpeed( player );
    player.StatBase[ ST_BASE_CRTYPE ] = result;

    player.DeleteItem( PID_ITEM_CLOTH, 1 );

}



void _InitCloth( Item& item, bool firstTime )
{
    item.SetEvent( ITEM_EVENT_USE, "_cloth_use" );
}

void GM_skin( Critter& player, int param0, int param1, int param2, string@ param3, int[] @ param4 )
{
    skin( player, param0, param1, param2 );
}

void skin( Critter& player, int playerId, int crType, int param2 )
{
    Critter@ cr;
    if( playerId != 0 )
        @cr = GetCritter( playerId );
    else
        @cr = @player;

    if( !valid( cr ) )
        return;

    skin( cr, crType );

}

void skin( Critter& cr, int crType )
{
    int lastBody = cr.CrType;
    if( lastBody == 51 || lastBody == 60 || lastBody == 100 || lastBody == 81 )
    {
        Item@ spec = cr.GetItem( 0, SLOT_HAND1 );
        if( valid( spec ) )
        {
            if( spec.GetProtoId() == PID_CLAW_EXT || spec.GetProtoId() == PID_FIREBREATH )
                DeleteItem( spec );
        }
        else
        {
            @spec = cr.GetItem( 0, SLOT_HAND2 );
            if( valid( spec ) )
            {
                if( spec.GetProtoId() == PID_CLAW_EXT || spec.GetProtoId() == PID_FIREBREATH )
                    DeleteItem( spec );
            }
        }
    }

    Item@ armor = cr.GetItem( 0, SLOT_ARMOR );

    if( valid( armor ) )
        _CritMoveItem( cr, armor, SLOT_INV );

    int result = crType;

    if( crType == 0 )
        result = ( cr.Stat[ ST_GENDER ] == GENDER_MALE ? CRTYPE_DEFAULT_M : CRTYPE_DEFAULT_F );
// /////////////////////////////////////////Возвращение характеристик к дефолтным//////////////////////////////////////////////
    cr.StatBase[ ST_KILL_EXPERIENCE ] = 0;
    cr.StatBase[ ST_NORMAL_RESIST ] = cr.Perk[ PE_TOUGHNESS ] * 10;
    cr.StatBase[ ST_LASER_RESIST ] = 0;
    cr.StatBase[ ST_FIRE_RESIST ] = 0;
    cr.StatBase[ ST_PLASMA_RESIST ] = 0;
    cr.StatBase[ ST_ELECTRO_RESIST ] = 0;
    cr.StatBase[ ST_EXPLODE_RESIST ] = 0;
    cr.StatBase[ ST_NORMAL_ABSORB ] = 0;
    cr.StatBase[ ST_LASER_ABSORB ] = 0;
    cr.StatBase[ ST_FIRE_ABSORB ] = 0;
    cr.StatBase[ ST_PLASMA_ABSORB ] = 0;
    cr.StatBase[ ST_ELECTRO_ABSORB ] = 0;
    cr.StatBase[ ST_EXPLODE_ABSORB ] = 0;
    /*
       if(lastBody==25)
       {
       cr.StatBase[ST_RADIATION_RESISTANCE]-=14;
       cr.StatBase[ST_MELEE_DAMAGE]-=5;
       cr.StatBase[ST_ARMOR_CLASS]-=24;
       cr.StatBase[ST_MAX_LIFE]-=40;
       cr.StatBase[ST_CURRENT_HP]=cr.Stat[ST_MAX_LIFE];
       cr.StatBase[ST_HEALING_RATE]-=10;
       }
       else if(lastBody==15)
       {
       cr.StatBase[ST_RADIATION_RESISTANCE]-=18;
       cr.StatBase[ST_POISON_RESISTANCE]-=45;
       cr.StatBase[ST_MELEE_DAMAGE]-=5;
       cr.StatBase[ST_ARMOR_CLASS]-=5;
       cr.StatBase[ST_HEALING_RATE]-=10;
       }
       else if(lastBody==16)
       {
       cr.StatBase[ST_POISON_RESISTANCE]-=30;
       cr.StatBase[ST_RADIATION_RESISTANCE]-=12;
       cr.StatBase[ST_MELEE_DAMAGE]-=4;
       cr.StatBase[ST_ARMOR_CLASS]-=14;
       cr.StatBase[ST_HEALING_RATE]-=10;
       }
       else if(lastBody==19)
       {
       cr.StatBase[ST_RADIATION_RESISTANCE]-=15;
       cr.StatBase[ST_POISON_RESISTANCE]-=6;
       cr.StatBase[ST_MELEE_DAMAGE]-=4;
       cr.StatBase[ST_ARMOR_CLASS]-=15;
       cr.StatBase[ST_HEALING_RATE]-=10;
       }
       else if(lastBody==24)
       {
       cr.StatBase[ST_RADIATION_RESISTANCE]-=5;
       cr.StatBase[ST_POISON_RESISTANCE]-=2;
       cr.StatBase[ST_MELEE_DAMAGE]-=1;
       cr.StatBase[ST_ARMOR_CLASS]-=4;
       cr.StatBase[ST_HEALING_RATE]-=10;
       }
       else if(lastBody==55)
       {
       cr.StatBase[ST_RADIATION_RESISTANCE]-=10;
       cr.StatBase[ST_POISON_RESISTANCE]-=4;
       cr.StatBase[ST_MELEE_DAMAGE]-=2;
       cr.StatBase[ST_ARMOR_CLASS]-=5;
       cr.StatBase[ST_HEALING_RATE]-=10;
       }
       else if(lastBody==22)
       {
       cr.StatBase[ST_RADIATION_RESISTANCE]-=12;
       cr.StatBase[ST_LASER_ABSORB]-=2;
       cr.StatBase[ST_MELEE_DAMAGE]-=2;
       cr.StatBase[ST_ARMOR_CLASS]-=3;
       cr.StatBase[ST_HEALING_RATE]-=10;
       }
       else if(lastBody==59)
       {
       cr.StatBase[ST_POISON_RESISTANCE]-=30;
       cr.StatBase[ST_RADIATION_RESISTANCE]-=12;
       cr.StatBase[ST_MELEE_DAMAGE]-=3;
       cr.StatBase[ST_ARMOR_CLASS]-=5;
       cr.StatBase[ST_HEALING_RATE]-=10;
       }
       else if(lastBody==60)
       {
       cr.StatBase[ST_POISON_RESISTANCE]-=30;
       cr.StatBase[ST_RADIATION_RESISTANCE]-=12;
       cr.StatBase[ST_MELEE_DAMAGE]-=4;
       cr.StatBase[ST_ARMOR_CLASS]-=14;
       cr.StatBase[ST_HEALING_RATE]-=10;
       }
       else if(lastBody==51)
       {
       cr.StatBase[ST_POISON_RESISTANCE]-=50;
       cr.StatBase[ST_RADIATION_RESISTANCE]-=20;
       cr.StatBase[ST_MELEE_DAMAGE]-=10;
       cr.StatBase[ST_ARMOR_CLASS]-=10;
       cr.StatBase[ST_HEALING_RATE]-=10;
       cr.StatBase[ST_MAX_LIFE]-=120;
       cr.StatBase[ST_CURRENT_HP]=cr.Stat[ST_MAX_LIFE];
       }
       else if(lastBody==81)
       {
       cr.StatBase[ST_POISON_RESISTANCE]-=20;
       cr.StatBase[ST_RADIATION_RESISTANCE]-=8;
       cr.StatBase[ST_MELEE_DAMAGE]-=6;
       cr.StatBase[ST_ARMOR_CLASS]-=28;
       cr.StatBase[ST_HEALING_RATE]-=10;
       }
       else if(lastBody==80)
       {
       cr.StatBase[ST_POISON_RESISTANCE]-=35;
       cr.StatBase[ST_RADIATION_RESISTANCE]-=14;
       cr.StatBase[ST_MELEE_DAMAGE]-=7;
       cr.StatBase[ST_ARMOR_CLASS]-=33;
       cr.StatBase[ST_HEALING_RATE]-=10;
       cr.StatBase[ST_MAX_LIFE]-=20;
       cr.StatBase[ST_CURRENT_HP]=cr.Stat[ST_MAX_LIFE];
       }
       else if(lastBody==86)
       {
       cr.StatBase[ST_POISON_RESISTANCE]-=45;
       cr.StatBase[ST_RADIATION_RESISTANCE]-=18;
       cr.StatBase[ST_MELEE_DAMAGE]-=7;
       cr.StatBase[ST_ARMOR_CLASS]-=10;
       cr.StatBase[ST_HEALING_RATE]-=10;
       cr.StatBase[ST_MAX_LIFE]-=120;
       cr.StatBase[ST_CURRENT_HP]=cr.Stat[ST_MAX_LIFE];
       }
       else if(lastBody==67)
       {
       cr.StatBase[ST_POISON_RESISTANCE]-=15;
       cr.StatBase[ST_RADIATION_RESISTANCE]-=6;
       cr.StatBase[ST_MELEE_DAMAGE]-=2;
       cr.StatBase[ST_ARMOR_CLASS]-=14;
       cr.StatBase[ST_HEALING_RATE]-=10;
       }
       else if(lastBody==68)
       {
       cr.StatBase[ST_POISON_RESISTANCE]-=15;
       cr.StatBase[ST_RADIATION_RESISTANCE]-=6;
       cr.StatBase[ST_MELEE_DAMAGE]-=2;
       cr.StatBase[ST_ARMOR_CLASS]-=22;
       cr.StatBase[ST_HEALING_RATE]-=10;
       }
       else if(lastBody==52)
       {
       cr.StatBase[ST_POISON_RESISTANCE]-=25;
       cr.StatBase[ST_RADIATION_RESISTANCE]-=10;
       cr.StatBase[ST_MELEE_DAMAGE]-=2;
       cr.StatBase[ST_ARMOR_CLASS]-=4;
       cr.StatBase[ST_HEALING_RATE]-=10;
       }
       else if(lastBody==97)
       {
       cr.StatBase[ST_POISON_RESISTANCE]-=5;
       cr.StatBase[ST_RADIATION_RESISTANCE]-=2;
       cr.StatBase[ST_MELEE_DAMAGE]-=2;
       cr.StatBase[ST_ARMOR_CLASS]-=4;
       cr.StatBase[ST_HEALING_RATE]-=10;
       }
       else if(lastBody==23)
       {
       cr.StatBase[ST_POISON_RESISTANCE]-=40;
       cr.StatBase[ST_RADIATION_RESISTANCE]-=16;
       cr.StatBase[ST_MELEE_DAMAGE]-=2;
       cr.StatBase[ST_ARMOR_CLASS]-=22;
       cr.StatBase[ST_HEALING_RATE]-=10;
       }
       else if(lastBody==76)
       {
       cr.StatBase[ST_POISON_RESISTANCE]-=25;
       cr.StatBase[ST_RADIATION_RESISTANCE]-=10;
       cr.StatBase[ST_MELEE_DAMAGE]-=2;
       cr.StatBase[ST_ARMOR_CLASS]-=22;
       cr.StatBase[ST_HEALING_RATE]-=10;
       }
       else if(lastBody==100)
       {
       cr.StatBase[ST_POISON_RESISTANCE]-=50;
       cr.StatBase[ST_RADIATION_RESISTANCE]-=20;
       cr.StatBase[ST_MELEE_DAMAGE]-=10;
       cr.StatBase[ST_ARMOR_CLASS]-=10;
       cr.StatBase[ST_HEALING_RATE]-=10;
       cr.StatBase[ST_MAX_LIFE]-=120;
       cr.StatBase[ST_CURRENT_HP]=cr.Stat[ST_MAX_LIFE];
       }*/

    cr.ChangeCrType( result );
	ChangeCritterSpeed( cr );
// //////////////////////////////////////////////Присвоение статов и бодитайпа//////////////////////////////////////////////////////////////////////////
    if( crType == 20 || crType == 21 || crType == 114 )
        cr.StatBase[ ST_BODY_TYPE ] = BT_SUPER_MUTANT;
    else if( crType == 25 )
    {
        cr.StatBase[ ST_KILL_EXPERIENCE ] = 650; /*
                                                    cr.StatBase[ST_NORMAL_RESIST]+=20;
                                                    cr.StatBase[ST_LASER_RESIST]+=20;
                                                    cr.StatBase[ST_FIRE_RESIST]+=20;
                                                    cr.StatBase[ST_PLASMA_RESIST]+=10;
                                                    cr.StatBase[ST_ELECTRO_RESIST]+=30;
                                                    cr.StatBase[ST_EXPLODE_RESIST]+=10;
                                                    cr.StatBase[ST_NORMAL_ABSORB]+=4;
                                                    cr.StatBase[ST_LASER_ABSORB]+=4;
                                                    cr.StatBase[ST_FIRE_ABSORB]+=4;
                                                    cr.StatBase[ST_PLASMA_ABSORB]+=4;
                                                    cr.StatBase[ST_ELECTRO_ABSORB]+=4;
                                                    cr.StatBase[ST_EXPLODE_ABSORB]+=4;
                                                    cr.StatBase[ST_RADIATION_RESISTANCE]+=14;
                                                    cr.StatBase[ST_MELEE_DAMAGE]+=5;
                                                    cr.StatBase[ST_ARMOR_CLASS]+=24;
                                                    cr.StatBase[ST_MAX_LIFE]+=40;
                                                    cr.StatBase[ST_CURRENT_HP]=cr.Stat[ST_MAX_LIFE];
                                                    cr.StatBase[ST_HEALING_RATE]+=10;*/
        cr.StatBase[ ST_BODY_TYPE ] = BT_CENTAUR;
    }
    else if( crType == 15 )
    {
        cr.StatBase[ ST_KILL_EXPERIENCE ] = 150; /*
                                                    cr.StatBase[ST_NORMAL_RESIST]+=25;
                                                    cr.StatBase[ST_LASER_RESIST]+=20;
                                                    cr.StatBase[ST_FIRE_RESIST]+=15;
                                                    cr.StatBase[ST_PLASMA_RESIST]+=10;
                                                    cr.StatBase[ST_ELECTRO_RESIST]+=30;
                                                    cr.StatBase[ST_EXPLODE_RESIST]+=20;
                                                    cr.StatBase[ST_NORMAL_ABSORB]+=2;
                                                    cr.StatBase[ST_RADIATION_RESISTANCE]+=18;
                                                    cr.StatBase[ST_POISON_RESISTANCE]+=45;
                                                    cr.StatBase[ST_MELEE_DAMAGE]+=5;
                                                    cr.StatBase[ST_ARMOR_CLASS]+=5;
                                                    cr.StatBase[ST_HEALING_RATE]+=10;*/
        cr.StatBase[ ST_BODY_TYPE ] = BT_BRAHMIN;
    }
    else if( crType == 28 || crType == 29 || crType == 79 )
        cr.StatBase[ ST_BODY_TYPE ] = BT_GHOUL;
    else if( crType == 16 )
    {
        cr.StatBase[ ST_KILL_EXPERIENCE ] = 80; /*
                                                   cr.StatBase[ST_NORMAL_RESIST]+=20;
                                                   cr.StatBase[ST_LASER_RESIST]+=20;
                                                   cr.StatBase[ST_FIRE_RESIST]+=20;
                                                   cr.StatBase[ST_PLASMA_RESIST]+=20;
                                                   cr.StatBase[ST_ELECTRO_RESIST]+=25;
                                                   cr.StatBase[ST_EXPLODE_RESIST]+=15;
                                                   cr.StatBase[ST_POISON_RESISTANCE]+=30;
                                                   cr.StatBase[ST_RADIATION_RESISTANCE]+=12;
                                                   cr.StatBase[ST_MELEE_DAMAGE]+=4;
                                                   cr.StatBase[ST_ARMOR_CLASS]+=14;
                                                   cr.StatBase[ST_HEALING_RATE]+=10;*/
        cr.StatBase[ ST_BODY_TYPE ] = BT_DOG;
    }
    else if( crType == 19 )
    {
        cr.StatBase[ ST_KILL_EXPERIENCE ] = 120; /*
                                                    cr.StatBase[ST_NORMAL_RESIST]+=20;
                                                    cr.StatBase[ST_LASER_RESIST]+=25;
                                                    cr.StatBase[ST_FIRE_RESIST]+=10;
                                                    cr.StatBase[ST_PLASMA_RESIST]+=10;
                                                    cr.StatBase[ST_ELECTRO_RESIST]+=40;
                                                    cr.StatBase[ST_EXPLODE_RESIST]+=20;
                                                    cr.StatBase[ST_RADIATION_RESISTANCE]+=15;
                                                    cr.StatBase[ST_POISON_RESISTANCE]+=6;
                                                    cr.StatBase[ST_MELEE_DAMAGE]+=4;
                                                    cr.StatBase[ST_ARMOR_CLASS]+=15;
                                                    cr.StatBase[ST_HEALING_RATE]+=10;*/
        cr.StatBase[ ST_BODY_TYPE ] = BT_RAT;
    }
    else if( crType == 24 )
    {
        cr.StatBase[ ST_KILL_EXPERIENCE ] = 80; /*
                                                   cr.StatBase[ST_RADIATION_RESISTANCE]+=5;
                                                   cr.StatBase[ST_POISON_RESISTANCE]+=2;
                                                   cr.StatBase[ST_MELEE_DAMAGE]+=1;
                                                   cr.StatBase[ST_ARMOR_CLASS]+=4;
                                                   cr.StatBase[ST_HEALING_RATE]+=10;*/
        cr.StatBase[ ST_BODY_TYPE ] = BT_RAT;
    }
    else if( crType == 76 )
    {
        cr.StatBase[ ST_KILL_EXPERIENCE ] = 250; /*
                                                    cr.StatBase[ST_NORMAL_RESIST]+=25;
                                                    cr.StatBase[ST_LASER_RESIST]+=20;
                                                    cr.StatBase[ST_FIRE_RESIST]+=20;
                                                    cr.StatBase[ST_PLASMA_RESIST]+=10;
                                                    cr.StatBase[ST_ELECTRO_RESIST]+=30;
                                                    cr.StatBase[ST_EXPLODE_RESIST]+=20;
                                                    cr.StatBase[ST_NORMAL_ABSORB]+=2;
                                                    cr.StatBase[ST_POISON_RESISTANCE]+=25;
                                                    cr.StatBase[ST_RADIATION_RESISTANCE]+=10;
                                                    cr.StatBase[ST_MELEE_DAMAGE]+=2;
                                                    cr.StatBase[ST_ARMOR_CLASS]+=22;
                                                    cr.StatBase[ST_HEALING_RATE]+=10;*/
        cr.StatBase[ ST_BODY_TYPE ] = BT_RAT;
    }
    else if( crType == 55 )
    {
        cr.StatBase[ ST_KILL_EXPERIENCE ] = 80; /*
                                                   cr.StatBase[ST_RADIATION_RESISTANCE]+=10;
                                                   cr.StatBase[ST_POISON_RESISTANCE]+=4;
                                                   cr.StatBase[ST_MELEE_DAMAGE]+=2;
                                                   cr.StatBase[ST_ARMOR_CLASS]+=5;
                                                   cr.StatBase[ST_HEALING_RATE]+=10;*/
        cr.StatBase[ ST_BODY_TYPE ] = BT_RAT;
    }
    else if( crType == 22 )
    {
        cr.StatBase[ ST_KILL_EXPERIENCE ] = 60; /*
                                                   cr.StatBase[ST_LASER_RESIST]+=30;
                                                   cr.StatBase[ST_FIRE_RESIST]+=10;
                                                   cr.StatBase[ST_PLASMA_RESIST]+=10;
                                                   cr.StatBase[ST_ELECTRO_RESIST]+=15;
                                                   cr.StatBase[ST_EXPLODE_RESIST]+=10;
                                                   cr.StatBase[ST_RADIATION_RESISTANCE]+=12;
                                                   cr.StatBase[ST_LASER_ABSORB]+=2;
                                                   cr.StatBase[ST_MELEE_DAMAGE]+=2;
                                                   cr.StatBase[ST_ARMOR_CLASS]+=3;
                                                   cr.StatBase[ST_HEALING_RATE]+=10;*/
        cr.StatBase[ ST_BODY_TYPE ] = BT_RADSCORPION;
    }
    else if( crType == 59 )
    {
        cr.StatBase[ ST_KILL_EXPERIENCE ] = 110; /*
                                                    cr.StatBase[ST_LASER_RESIST]+=50;
                                                    cr.StatBase[ST_FIRE_RESIST]+=10;
                                                    cr.StatBase[ST_PLASMA_RESIST]+=10;
                                                    cr.StatBase[ST_ELECTRO_RESIST]+=30;
                                                    cr.StatBase[ST_EXPLODE_RESIST]+=20;
                                                    cr.StatBase[ST_POISON_RESISTANCE]+=30;
                                                    cr.StatBase[ST_RADIATION_RESISTANCE]+=12;
                                                    cr.StatBase[ST_NORMAL_ABSORB]+=2;
                                                    cr.StatBase[ST_LASER_ABSORB]+=4;
                                                    cr.StatBase[ST_FIRE_ABSORB]+=2;
                                                    cr.StatBase[ST_EXPLODE_ABSORB]+=2;
                                                    cr.StatBase[ST_MELEE_DAMAGE]+=3;
                                                    cr.StatBase[ST_ARMOR_CLASS]+=5;
                                                    cr.StatBase[ST_HEALING_RATE]+=10;*/
        cr.StatBase[ ST_BODY_TYPE ] = BT_RADSCORPION;
    }
    else if( crType == 60 )
    {
        Item@[] items;
        uint itemscount = cr.GetItems( SLOT_HAND1, items );
        if( itemscount > 0 )
        {
            cr.MoveItem( items[ 0 ].Id, itemscount, SLOT_INV );
            items[ 0 ].Update();
        }
        Item@ weapon = cr.AddItem( PID_CLAW_EXT, 1 );
        cr.MoveItem( weapon.Id, 1, SLOT_HAND1 );
        weapon.Update();
        cr.StatBase[ ST_KILL_EXPERIENCE ] = 250; /*
                                                    cr.StatBase[ST_NORMAL_RESIST]+=15;
                                                    cr.StatBase[ST_LASER_RESIST]+=15;
                                                    cr.StatBase[ST_FIRE_RESIST]+=15;
                                                    cr.StatBase[ST_PLASMA_RESIST]+=15;
                                                    cr.StatBase[ST_ELECTRO_RESIST]+=15;
                                                    cr.StatBase[ST_EXPLODE_RESIST]+=15;
                                                    cr.StatBase[ST_POISON_RESISTANCE]+=30;
                                                    cr.StatBase[ST_RADIATION_RESISTANCE]+=12;
                                                    cr.StatBase[ST_NORMAL_ABSORB]+=2;
                                                    cr.StatBase[ST_LASER_ABSORB]+=2;
                                                    cr.StatBase[ST_FIRE_ABSORB]+=2;
                                                    cr.StatBase[ST_EXPLODE_ABSORB]+=2;
                                                    cr.StatBase[ST_MELEE_DAMAGE]+=4;
                                                    cr.StatBase[ST_ARMOR_CLASS]+=14;
                                                    cr.StatBase[ST_HEALING_RATE]+=10;*/
        cr.StatBase[ ST_BODY_TYPE ] = BT_DEADCLAW;
    }
    else if( crType == 51 )
    {
        Item@[] items;
        uint itemscount = cr.GetItems( SLOT_HAND1, items );
        if( itemscount > 0 )
        {
            cr.MoveItem( items[ 0 ].Id, itemscount, SLOT_INV );
            items[ 0 ].Update();
        }
        Item@ weapon = cr.AddItem( PID_CLAW_EXT, 1 );
        cr.MoveItem( weapon.Id, 1, SLOT_HAND1 );
        weapon.Update();
        cr.StatBase[ ST_KILL_EXPERIENCE ] = 1000; /*
                                                     cr.StatBase[ST_NORMAL_RESIST]+=25;
                                                     cr.StatBase[ST_LASER_RESIST]+=10;
                                                     cr.StatBase[ST_FIRE_RESIST]+=20;
                                                     cr.StatBase[ST_PLASMA_RESIST]+=20;
                                                     cr.StatBase[ST_ELECTRO_RESIST]+=20;
                                                     cr.StatBase[ST_EXPLODE_RESIST]+=20;
                                                     cr.StatBase[ST_POISON_RESISTANCE]+=50;
                                                     cr.StatBase[ST_RADIATION_RESISTANCE]+=20;
                                                     cr.StatBase[ST_NORMAL_ABSORB]+=6;
                                                     cr.StatBase[ST_LASER_ABSORB]+=4;
                                                     cr.StatBase[ST_PLASMA_ABSORB]+=4;
                                                     cr.StatBase[ST_ELECTRO_ABSORB]+=4;
                                                     cr.StatBase[ST_FIRE_ABSORB]+=4;
                                                     cr.StatBase[ST_EXPLODE_ABSORB]+=6;
                                                     cr.StatBase[ST_MELEE_DAMAGE]+=10;
                                                     cr.StatBase[ST_ARMOR_CLASS]+=10;
                                                     cr.StatBase[ST_HEALING_RATE]+=10;
                                                     cr.StatBase[ST_MAX_LIFE]+=120;
                                                     cr.StatBase[ST_CURRENT_HP]=cr.Stat[ST_MAX_LIFE];*/
        cr.StatBase[ ST_BODY_TYPE ] = BT_DEADCLAW;
    }
    else if( crType == 100 )
    {
        Item@[] items;
        uint itemscount = cr.GetItems( SLOT_HAND1, items );
        if( itemscount > 0 )
        {
            cr.MoveItem( items[ 0 ].Id, itemscount, SLOT_INV );
            items[ 0 ].Update();
        }
        Item@ weapon = cr.AddItem( PID_CLAW_EXT, 1 );
        cr.MoveItem( weapon.Id, 1, SLOT_HAND1 );
        weapon.Update();
        cr.StatBase[ ST_KILL_EXPERIENCE ] = 1250; /*
                                                     cr.StatBase[ST_NORMAL_RESIST]+=35;
                                                     cr.StatBase[ST_LASER_RESIST]+=20;
                                                     cr.StatBase[ST_FIRE_RESIST]+=25;
                                                     cr.StatBase[ST_PLASMA_RESIST]+=25;
                                                     cr.StatBase[ST_ELECTRO_RESIST]+=25;
                                                     cr.StatBase[ST_EXPLODE_RESIST]+=25;
                                                     cr.StatBase[ST_POISON_RESISTANCE]+=50;
                                                     cr.StatBase[ST_RADIATION_RESISTANCE]+=20;
                                                     cr.StatBase[ST_NORMAL_ABSORB]+=6;
                                                     cr.StatBase[ST_LASER_ABSORB]+=4;
                                                     cr.StatBase[ST_PLASMA_ABSORB]+=4;
                                                     cr.StatBase[ST_ELECTRO_ABSORB]+=4;
                                                     cr.StatBase[ST_FIRE_ABSORB]+=4;
                                                     cr.StatBase[ST_EXPLODE_ABSORB]+=6;
                                                     cr.StatBase[ST_MELEE_DAMAGE]+=10;
                                                     cr.StatBase[ST_ARMOR_CLASS]+=10;
                                                     cr.StatBase[ST_HEALING_RATE]+=10;
                                                     cr.StatBase[ST_MAX_LIFE]+=120;
                                                     cr.StatBase[ST_CURRENT_HP]=cr.Stat[ST_MAX_LIFE];*/
        cr.StatBase[ ST_BODY_TYPE ] = BT_DEADCLAW;
    }
    else if( crType == 81 )
    {
        Item@[] items;
        uint itemscount = cr.GetItems( SLOT_HAND1, items );
        if( itemscount > 0 )
        {
            cr.MoveItem( items[ 0 ].Id, itemscount, SLOT_INV );
            items[ 0 ].Update();
        }
        Item@ weapon = cr.AddItem( PID_FIREBREATH, 1 );
        cr.MoveItem( weapon.Id, 1, SLOT_HAND1 );
        weapon.Update();
        cr.StatBase[ ST_KILL_EXPERIENCE ] = 1000; /*
                                                     cr.StatBase[ST_NORMAL_RESIST]+=40;
                                                     cr.StatBase[ST_LASER_RESIST]+=60;
                                                     cr.StatBase[ST_FIRE_RESIST]+=500;
                                                     cr.StatBase[ST_PLASMA_RESIST]+=50;
                                                     cr.StatBase[ST_ELECTRO_RESIST]+=50;
                                                     cr.StatBase[ST_EXPLODE_RESIST]+=40;
                                                     cr.StatBase[ST_POISON_RESISTANCE]+=20;
                                                     cr.StatBase[ST_RADIATION_RESISTANCE]+=8;
                                                     cr.StatBase[ST_NORMAL_ABSORB]+=5;
                                                     cr.StatBase[ST_LASER_ABSORB]+=8;
                                                     cr.StatBase[ST_FIRE_ABSORB]+=20;
                                                     cr.StatBase[ST_PLASMA_ABSORB]+=4;
                                                     cr.StatBase[ST_ELECTRO_ABSORB]+=2;
                                                     cr.StatBase[ST_EXPLODE_ABSORB]+=6;
                                                     cr.StatBase[ST_MELEE_DAMAGE]+=6;
                                                     cr.StatBase[ST_ARMOR_CLASS]+=28;
                                                     cr.StatBase[ST_HEALING_RATE]+=10;*/
        cr.StatBase[ ST_BODY_TYPE ] = BT_GECKO;
    }
    else if( crType == 80 )
    {
        cr.StatBase[ ST_KILL_EXPERIENCE ] = 500;
        cr.StatBase[ ST_NORMAL_RESIST ] += 40; /*
                                                  cr.StatBase[ST_LASER_RESIST]+=40;
                                                  cr.StatBase[ST_FIRE_RESIST]+=5;
                                                  cr.StatBase[ST_PLASMA_RESIST]+=50;
                                                  cr.StatBase[ST_ELECTRO_RESIST]+=55;
                                                  cr.StatBase[ST_EXPLODE_RESIST]+=45;
                                                  cr.StatBase[ST_POISON_RESISTANCE]+=35;
                                                  cr.StatBase[ST_RADIATION_RESISTANCE]+=14;
                                                  cr.StatBase[ST_NORMAL_ABSORB]+=6;
                                                  cr.StatBase[ST_LASER_ABSORB]+=6;
                                                  cr.StatBase[ST_PLASMA_ABSORB]+=5;
                                                  cr.StatBase[ST_ELECTRO_ABSORB]+=3;
                                                  cr.StatBase[ST_EXPLODE_ABSORB]+=9;
                                                  cr.StatBase[ST_MELEE_DAMAGE]+=7;
                                                  cr.StatBase[ST_ARMOR_CLASS]+=33;
                                                  cr.StatBase[ST_HEALING_RATE]+=10;
                                                  cr.StatBase[ST_MAX_LIFE]+=20;
                                                  cr.StatBase[ST_CURRENT_HP]=cr.Stat[ST_MAX_LIFE];*/
        cr.StatBase[ ST_BODY_TYPE ] = BT_ALIEN;
    }
    else if( crType == 86 )
    {
        cr.StatBase[ ST_KILL_EXPERIENCE ] = 1000;
        cr.StatBase[ ST_NORMAL_RESIST ] += 40; /*
                                                  cr.StatBase[ST_LASER_RESIST]+=50;
                                                  cr.StatBase[ST_FIRE_RESIST]+=10;
                                                  cr.StatBase[ST_PLASMA_RESIST]+=50;
                                                  cr.StatBase[ST_ELECTRO_RESIST]+=50;
                                                  cr.StatBase[ST_EXPLODE_RESIST]+=60;
                                                  cr.StatBase[ST_POISON_RESISTANCE]+=45;
                                                  cr.StatBase[ST_RADIATION_RESISTANCE]+=18;
                                                  cr.StatBase[ST_NORMAL_ABSORB]+=12;
                                                  cr.StatBase[ST_LASER_ABSORB]+=15;
                                                  cr.StatBase[ST_PLASMA_ABSORB]+=12;
                                                  cr.StatBase[ST_ELECTRO_ABSORB]+=15;
                                                  cr.StatBase[ST_EXPLODE_ABSORB]+=25;
                                                  cr.StatBase[ST_MELEE_DAMAGE]+=7;
                                                  cr.StatBase[ST_ARMOR_CLASS]+=10;
                                                  cr.StatBase[ST_HEALING_RATE]+=10;
                                                  cr.StatBase[ST_MAX_LIFE]+=120;
                                                  cr.StatBase[ST_CURRENT_HP]=cr.Stat[ST_MAX_LIFE];*/
        cr.StatBase[ ST_BODY_TYPE ] = BT_ALIEN;
    }
    else if( crType == 67 )
    {
        cr.StatBase[ ST_KILL_EXPERIENCE ] = 60; /*
                                                   cr.StatBase[ST_NORMAL_RESIST]+=20;
                                                   cr.StatBase[ST_LASER_RESIST]+=20;
                                                   cr.StatBase[ST_FIRE_RESIST]+=10;
                                                   cr.StatBase[ST_PLASMA_RESIST]+=10;
                                                   cr.StatBase[ST_ELECTRO_RESIST]+=30;
                                                   cr.StatBase[ST_EXPLODE_RESIST]+=20;
                                                   cr.StatBase[ST_POISON_RESISTANCE]+=15;
                                                   cr.StatBase[ST_RADIATION_RESISTANCE]+=6;
                                                   cr.StatBase[ST_MELEE_DAMAGE]+=2;
                                                   cr.StatBase[ST_ARMOR_CLASS]+=14;
                                                   cr.StatBase[ST_HEALING_RATE]+=10;*/
        cr.StatBase[ ST_BODY_TYPE ] = BT_GECKO;
    }
    else if( crType == 68 )
    {
        cr.StatBase[ ST_KILL_EXPERIENCE ] = 135; /*
                                                    cr.StatBase[ST_NORMAL_RESIST]+=25;
                                                    cr.StatBase[ST_LASER_RESIST]+=20;
                                                    cr.StatBase[ST_FIRE_RESIST]+=20;
                                                    cr.StatBase[ST_PLASMA_RESIST]+=10;
                                                    cr.StatBase[ST_EXPLODE_RESIST]+=20;
                                                    cr.StatBase[ST_ELECTRO_RESIST]+=30;
                                                    cr.StatBase[ST_LASER_ABSORB]+=2;
                                                    cr.StatBase[ST_POISON_RESISTANCE]+=15;
                                                    cr.StatBase[ST_RADIATION_RESISTANCE]+=6;
                                                    cr.StatBase[ST_MELEE_DAMAGE]+=2;
                                                    cr.StatBase[ST_ARMOR_CLASS]+=22;
                                                    cr.StatBase[ST_HEALING_RATE]+=10;*/
        cr.StatBase[ ST_BODY_TYPE ] = BT_GECKO;
    }
    else if( crType == 70 || crType == 17 || crType == 53 || crType == 54 || crType == 66 || crType == 101 )
        cr.StatBase[ ST_BODY_TYPE ] = BT_ROBOT;
    else if( crType == 52 )
    {
        cr.StatBase[ ST_KILL_EXPERIENCE ] = 70; /*
                                                   cr.StatBase[ST_POISON_RESISTANCE]+=25;
                                                   cr.StatBase[ST_RADIATION_RESISTANCE]+=10;
                                                   cr.StatBase[ST_MELEE_DAMAGE]+=2;
                                                   cr.StatBase[ST_ARMOR_CLASS]+=4;
                                                   cr.StatBase[ST_HEALING_RATE]+=10;*/
        cr.StatBase[ ST_BODY_TYPE ] = BT_MANTI;
    }
    else if( crType == 97 )
    {
        cr.StatBase[ ST_KILL_EXPERIENCE ] = 30; /*
                                                   cr.StatBase[ST_POISON_RESISTANCE]+=5;
                                                   cr.StatBase[ST_RADIATION_RESISTANCE]+=2;
                                                   cr.StatBase[ST_MELEE_DAMAGE]+=2;
                                                   cr.StatBase[ST_ARMOR_CLASS]+=4;
                                                   cr.StatBase[ST_HEALING_RATE]+=10;*/
        cr.StatBase[ ST_BODY_TYPE ] = BT_GIANT_ANT;
    }
    else if( crType == 23 )
    {
        cr.StatBase[ ST_KILL_EXPERIENCE ] = 85;
        /*
           cr.StatBase[ST_NORMAL_RESIST]+=40;
           cr.StatBase[ST_LASER_RESIST]+=40;
           cr.StatBase[ST_PLASMA_RESIST]+=50;
           cr.StatBase[ST_EXPLODE_RESIST]+=40;
           cr.StatBase[ST_ELECTRO_RESIST]+=500;
           cr.StatBase[ST_NORMAL_ABSORB]+=5;
           cr.StatBase[ST_LASER_ABSORB]+=5;
           cr.StatBase[ST_PLASMA_ABSORB]+=4;
           cr.StatBase[ST_EXPLODE_ABSORB]+=6;
           cr.StatBase[ST_POISON_RESISTANCE]+=40;
           cr.StatBase[ST_RADIATION_RESISTANCE]+=16;
           cr.StatBase[ST_MELEE_DAMAGE]+=2;
           cr.StatBase[ST_ARMOR_CLASS]+=22;
           cr.StatBase[ST_HEALING_RATE]+=10;
         */
        cr.StatBase[ ST_BODY_TYPE ] = BT_FLOATER;
    }
    else if( crType == 65 )
        cr.StatBase[ ST_BODY_TYPE ] = BT_PLANT;
    else if( cr.Stat[ ST_BODY_TYPE ] != BT_ZOMBIE )
        cr.StatBase[ ST_BODY_TYPE ] = 0;

    cr.StatBase[ ST_BASE_CRTYPE ] = crType;

    ChangeCritterSpeed( cr );
}
